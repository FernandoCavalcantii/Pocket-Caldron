{"ast":null,"code":"var _jsxFileName = \"/home/fernando/Pasta1/Projetos/sd-017-project-recipes-app/src/pages/Foods/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport CategoriesFilter from '../../components/CategoriesFilter';\nimport RecipeCard from '../../components/RecipeCard';\nimport Footer from '../../components/Footer';\nimport { getFoodsCategories, getFoodsRecipes, getFoodsByCategory } from '../../services/api';\nimport style from './style.module.scss';\nimport Header from '../../components/Header';\nimport setFoods from '../../Redux/actions/foodsActions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Foods = () => {\n  _s();\n\n  const history = useHistory();\n  const foods = useSelector(state => state.foodsReducer.foods);\n  const dispatch = useDispatch();\n  const [selectedCategory, setSelectedCategory] = useState('');\n  const fetchFoods = useCallback(async () => {\n    const res = await getFoodsRecipes();\n    dispatch(setFoods(res.meals));\n  }, [dispatch]);\n\n  const setCategory = async category => {\n    if (category === 'all' || selectedCategory === category) {\n      fetchFoods();\n    } else {\n      const res = await getFoodsByCategory(category);\n      dispatch(setFoods(res.meals));\n      setSelectedCategory(category);\n    }\n  };\n\n  const historyPush = () => {\n    const copy = [...foods];\n    const id = copy[0].idMeal;\n    history.push(`/foods/${id}`);\n  };\n\n  useEffect(() => {\n    getFoodsCategories();\n    fetchFoods();\n  }, [fetchFoods]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      searchEnable: true,\n      pageName: \"Foods\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CategoriesFilter, {\n      setCategory: setCategory\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: style.recipesContainer,\n      children: [foods && foods.length === 1 && historyPush(), foods === null || foods === void 0 ? void 0 : foods.map((food, index) => {\n        if (index < Number('12')) {\n          return /*#__PURE__*/_jsxDEV(RecipeCard, {\n            testIdIndex: index,\n            name: food.strMeal,\n            thumb: food.strMealThumb,\n            recipeId: food.idMeal\n          }, food.strMeal, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 15\n          }, this);\n        }\n\n        return false;\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Foods, \"Ns7hp+nx+k9qGDZzF5m4i38F2+I=\", false, function () {\n  return [useHistory, useSelector, useDispatch];\n});\n\n_c = Foods;\nexport default Foods;\n\nvar _c;\n\n$RefreshReg$(_c, \"Foods\");","map":{"version":3,"sources":["/home/fernando/Pasta1/Projetos/sd-017-project-recipes-app/src/pages/Foods/index.js"],"names":["React","useEffect","useState","useCallback","useHistory","useDispatch","useSelector","CategoriesFilter","RecipeCard","Footer","getFoodsCategories","getFoodsRecipes","getFoodsByCategory","style","Header","setFoods","Foods","history","foods","state","foodsReducer","dispatch","selectedCategory","setSelectedCategory","fetchFoods","res","meals","setCategory","category","historyPush","copy","id","idMeal","push","recipesContainer","length","map","food","index","Number","strMeal","strMealThumb"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,WAArC,QAAwD,OAAxD;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,gBAAP,MAA6B,mCAA7B;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,SAASC,kBAAT,EAA6BC,eAA7B,EACEC,kBADF,QAC4B,oBAD5B;AAGA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,QAAP,MAAqB,kCAArB;;;;AAEA,MAAMC,KAAK,GAAG,MAAM;AAAA;;AAClB,QAAMC,OAAO,GAAGb,UAAU,EAA1B;AACA,QAAMc,KAAK,GAAGZ,WAAW,CAAEa,KAAD,IAAWA,KAAK,CAACC,YAAN,CAAmBF,KAA/B,CAAzB;AACA,QAAMG,QAAQ,GAAGhB,WAAW,EAA5B;AACA,QAAM,CAACiB,gBAAD,EAAmBC,mBAAnB,IAA0CrB,QAAQ,CAAC,EAAD,CAAxD;AAEA,QAAMsB,UAAU,GAAGrB,WAAW,CAC5B,YAAY;AACV,UAAMsB,GAAG,GAAG,MAAMd,eAAe,EAAjC;AACAU,IAAAA,QAAQ,CAACN,QAAQ,CAACU,GAAG,CAACC,KAAL,CAAT,CAAR;AACD,GAJ2B,EAIzB,CAACL,QAAD,CAJyB,CAA9B;;AAOA,QAAMM,WAAW,GAAG,MAAOC,QAAP,IAAoB;AACtC,QAAIA,QAAQ,KAAK,KAAb,IAAsBN,gBAAgB,KAAKM,QAA/C,EAAyD;AACvDJ,MAAAA,UAAU;AACX,KAFD,MAEO;AACL,YAAMC,GAAG,GAAG,MAAMb,kBAAkB,CAACgB,QAAD,CAApC;AACAP,MAAAA,QAAQ,CAACN,QAAQ,CAACU,GAAG,CAACC,KAAL,CAAT,CAAR;AACAH,MAAAA,mBAAmB,CAACK,QAAD,CAAnB;AACD;AACF,GARD;;AAUA,QAAMC,WAAW,GAAG,MAAM;AACxB,UAAMC,IAAI,GAAG,CAAC,GAAGZ,KAAJ,CAAb;AACA,UAAMa,EAAE,GAAGD,IAAI,CAAC,CAAD,CAAJ,CAAQE,MAAnB;AACAf,IAAAA,OAAO,CAACgB,IAAR,CAAc,UAASF,EAAG,EAA1B;AACD,GAJD;;AAMA9B,EAAAA,SAAS,CAAC,MAAM;AACdS,IAAAA,kBAAkB;AAClBc,IAAAA,UAAU;AACX,GAHQ,EAGN,CAACA,UAAD,CAHM,CAAT;AAIA,sBACE;AAAA,4BACE,QAAC,MAAD;AAAQ,MAAA,YAAY,MAApB;AAAqB,MAAA,QAAQ,EAAC;AAA9B;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,QAAC,gBAAD;AAAkB,MAAA,WAAW,EAAGG;AAAhC;AAAA;AAAA;AAAA;AAAA,YAFF,eAGE;AAAS,MAAA,SAAS,EAAGd,KAAK,CAACqB,gBAA3B;AAAA,iBACIhB,KAAK,IAAIA,KAAK,CAACiB,MAAN,KAAiB,CAA1B,IAA+BN,WAAW,EAD9C,EAEGX,KAFH,aAEGA,KAFH,uBAEGA,KAAK,CAAEkB,GAAP,CAAW,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAC3B,YAAIA,KAAK,GAAGC,MAAM,CAAC,IAAD,CAAlB,EAA0B;AACxB,8BACE,QAAC,UAAD;AACE,YAAA,WAAW,EAAGD,KADhB;AAGE,YAAA,IAAI,EAAGD,IAAI,CAACG,OAHd;AAIE,YAAA,KAAK,EAAGH,IAAI,CAACI,YAJf;AAKE,YAAA,QAAQ,EAAGJ,IAAI,CAACL;AALlB,aAEQK,IAAI,CAACG,OAFb;AAAA;AAAA;AAAA;AAAA,kBADF;AASD;;AACD,eAAO,KAAP;AACD,OAbA,CAFH;AAAA;AAAA;AAAA;AAAA;AAAA,YAHF,eAoBE,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,YApBF;AAAA,kBADF;AAwBD,CAzDD;;GAAMxB,K;UACYZ,U,EACFE,W,EACGD,W;;;KAHbW,K;AA2DN,eAAeA,KAAf","sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport CategoriesFilter from '../../components/CategoriesFilter';\nimport RecipeCard from '../../components/RecipeCard';\nimport Footer from '../../components/Footer';\nimport { getFoodsCategories, getFoodsRecipes,\n  getFoodsByCategory } from '../../services/api';\n\nimport style from './style.module.scss';\nimport Header from '../../components/Header';\nimport setFoods from '../../Redux/actions/foodsActions';\n\nconst Foods = () => {\n  const history = useHistory();\n  const foods = useSelector((state) => state.foodsReducer.foods);\n  const dispatch = useDispatch();\n  const [selectedCategory, setSelectedCategory] = useState('');\n\n  const fetchFoods = useCallback(\n    async () => {\n      const res = await getFoodsRecipes();\n      dispatch(setFoods(res.meals));\n    }, [dispatch],\n  );\n\n  const setCategory = async (category) => {\n    if (category === 'all' || selectedCategory === category) {\n      fetchFoods();\n    } else {\n      const res = await getFoodsByCategory(category);\n      dispatch(setFoods(res.meals));\n      setSelectedCategory(category);\n    }\n  };\n\n  const historyPush = () => {\n    const copy = [...foods];\n    const id = copy[0].idMeal;\n    history.push(`/foods/${id}`);\n  };\n\n  useEffect(() => {\n    getFoodsCategories();\n    fetchFoods();\n  }, [fetchFoods]);\n  return (\n    <>\n      <Header searchEnable pageName=\"Foods\" />\n      <CategoriesFilter setCategory={ setCategory } />\n      <section className={ style.recipesContainer }>\n        { foods && foods.length === 1 && historyPush() }\n        {foods?.map((food, index) => {\n          if (index < Number('12')) {\n            return (\n              <RecipeCard\n                testIdIndex={ index }\n                key={ food.strMeal }\n                name={ food.strMeal }\n                thumb={ food.strMealThumb }\n                recipeId={ food.idMeal }\n              />\n            );\n          }\n          return false;\n        })}\n      </section>\n      <Footer />\n    </>\n  );\n};\n\nexport default Foods;\n"]},"metadata":{},"sourceType":"module"}